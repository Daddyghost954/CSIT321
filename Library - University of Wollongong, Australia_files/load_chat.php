(function() { var options = {"id":4383,"hash":"3d568e5110343d99a99ae8aa1119472a","base_domain":"region-au.libanswers.com","iid":229,"onlinerules":[{"u":0,"d":[2514]}],"width":"400px","height":"340px","color_backg":"#FFFFFF","autoload_time":0,"slidebutton_url":"","slidebutton_text":"Live Chat","slidebutton_height":"125px","slidebutton_bcolor":"#CC0000","slidebutton_color":"#FFFFFF","slidebutton_position":"r"}; var cascadeServer = "https:\/\/cascade2-au.libchat.com"; var referer = ""; var refererTitle = ""; var JSONP=function(){var head,window=this,config={};return{get:function(url,params,callback,uniqueName){var key,query=-1===(url||"").indexOf("?")?"?":"&";for(key in uniqueName="callback_json"+uniqueName,params=params||{})params.hasOwnProperty(key)&&(query+=encodeURIComponent(key)+"="+encodeURIComponent(params[key])+"&");return window[uniqueName]=function(data){callback(data);try{delete window[uniqueName]}catch(e){}window[uniqueName]=null},function(url,pfnError){var script=document.createElement("script"),done=!1;script.src=url,script.async=!0;var errorHandler=pfnError||config.error;"function"==typeof errorHandler&&(script.onerror=function(ex){errorHandler({url:url,event:ex})}),script.onload=script.onreadystatechange=function(){done||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(done=!0,script.onload=script.onreadystatechange=null,script&&script.parentNode&&script.parentNode.removeChild(script))},head||(head=document.getElementsByTagName("head")[0]),head.appendChild(script)}(url+query+"callback="+uniqueName),uniqueName},init:function(obj){config=obj}}}(),tabWidget={config:{},online:!1,loaded:!1,statusChecked:!1,autoload:!1,chatContainer:null,iframeContainer:null,chatTimer:null,referer:"",refererTitle:"",autoLoadWidget:function(){this.autoload=!0,this.checkStatus()},setTimer:function(){this.config.autoload_time&&0!==parseInt(this.config.autoload_time,10)&&(this.chatTimer=window.setTimeout(this.autoLoadWidget.bind(this),1e3*parseInt(this.config.autoload_time,10)))},openWidget:function(){this.chatContainer.classList.add("open"),this.iframeContainer.setAttribute("aria-hidden","false")},closeWidget:function(){this.chatContainer.classList.remove("open"),this.iframeContainer.setAttribute("aria-hidden","true")},handleWidgetToggle:function(ev){ev.preventDefault(),window.clearTimeout(this.chatTimer),this.chatContainer.classList.contains("open")?this.closeWidget():(this.statusChecked||this.checkStatus(),this.openWidget())},buildTab:function(){this.chatContainer=document.createElement("div"),this.chatContainer.id="lcs_slide_out-"+this.config.id,this.chatContainer.className="lcs_slide_out lcs_slide_out-"+this.config.slidebutton_position;var chat_header=document.createElement("header"),chat_button=document.createElement("a");if(chat_button.setAttribute("role","button"),chat_button.setAttribute("aria-controls","lcs_slide_out-"+this.config.id),chat_button.setAttribute("href","#"),chat_header.appendChild(chat_button),this.chatContainer.appendChild(chat_header),this.iframeContainer=document.createElement("div"),this.iframeContainer.className="lcs_load",this.iframeContainer.setAttribute("aria-hidden","true"),this.chatContainer.appendChild(this.iframeContainer),this.config.slidebutton_url&&""!==this.config.slidebutton_url){var img=document.createElement("img");img.setAttribute("src",this.config.slidebutton_url),img.setAttribute("alt",this.config.slidebutton_text),chat_button.style.padding="0",chat_button.appendChild(img)}else this.config.slidebutton_color||(this.config.slidebutton_color="#ffffff"),chat_button.innerHTML=this.config.slidebutton_text,chat_button.style.borderColor=this.config.slidebutton_color,chat_button.style.color=this.config.slidebutton_color,chat_button.style.backgroundColor=this.config.slidebutton_bcolor,chat_button.style.boxShadow="rgb(204, 204, 204) 0px 0px 5px","b"===this.config.slidebutton_position?chat_button.style.borderWidth="4px 4px 0px 4px":chat_button.style.borderWidth="0px 4px 4px 4px";document.body.appendChild(this.chatContainer),chat_button.addEventListener("click",this.handleWidgetToggle.bind(this))},handleMessage:function(ev){var data=ev.data;"object"==typeof data&&data.action&&("closeWidget"===data.action?(this.closeWidget(),this.iframeContainer.removeAttribute("aria-live"),this.iframeContainer.setAttribute("aria-hidden","true")):"chatStarted"===data.action||"autopop"===data.action&&this.openWidget())},getWidgetUrl:function(){return""===this.referer&&(this.referer=window.location.href),""===this.refererTitle&&window.document.title&&(this.refererTitle=window.document.title),"https://"+this.config.base_domain+"/chati.php?hash="+this.config.hash+"&referer="+encodeURIComponent(this.referer)+"&referer_title="+encodeURIComponent(this.refererTitle)},loadIframe:function(){if(null===this.iframeContainer.querySelector("iframe")){var widgetUrl=this.getWidgetUrl();if(!1===this.online&&!0===this.autoload)return this.autoload=!1,void(this.statusChecked=!1);!0===this.autoload&&(this.autoload=!1,widgetUrl+="&auto=true",this.iframeContainer.setAttribute("aria-live","polite"),this.iframeContainer.setAttribute("aria-hidden","false")),window.addEventListener("message",this.handleMessage.bind(this));var iframe=document.createElement("iframe");iframe.setAttribute("id","iframe_"+this.config.hash),iframe.setAttribute("name","iframe_"+this.config.hash),iframe.setAttribute("src",widgetUrl),iframe.setAttribute("title","Chat Widget"),iframe.setAttribute("scrolling","no"),this.iframeContainer.appendChild(iframe)}},statusError:function(){this.online=!1,this.loadIframe()},statusSuccess:function(data){this.online=!1,(data.u||data.d)&&(this.online=!0),this.loadIframe()},checkStatus:function(){this.statusChecked=!0,JSONP.init({error:this.statusError.bind(this)}),JSONP.get(this.cascadeServer+"/widget_status",{iid:this.config.iid,rules:JSON.stringify(this.config.onlinerules)},this.statusSuccess.bind(this),this.config.hash)},insertWidgetCSS:function(){var b_btn_offset="-42px";this.config.slidebutton_url&&""!==this.config.slidebutton_url&&this.config.slidebutton_height&&""!==this.config.slidebutton_height&&(b_btn_offset="-"+this.config.slidebutton_height);var iframeHeight=parseInt(this.config.height,10)-2,css="/* LibChat Widget CSS */ .lcs_slide_out { width: "+this.config.width+"; height: "+this.config.height+"; position: fixed; -webkit-transition-duration: 0.6s; -moz-transition-duration: 0.6s; -o-transition-duration: 0.6s; transition-duration: 0.6s; background-color: rgb(249, 249, 249); border: 1px solid #ccc; z-index: 1000; } .lcs_slide_out header { display: block; } .lcs_slide_out header a { text-align: center; padding: 10px; display: block; position: absolute; border-width: 0; border-style: solid; background-color: "+this.config.slidebutton_bcolor+"; } .lcs_load { width: "+this.config.width+"; height: 100%; padding: 0 2px 0 0; box-sizing: border-box; } .lcs_slide_out-l { top: 100px; left: -"+this.config.width+"; } .lcs_slide_out-l.open { left: 0px; } .lcs_slide_out-l header { -webkit-transform: rotate(-90deg); -ms-transform: rotate(-90deg); transform: rotate(-90deg); -webkit-transform-origin: top right; -ms-transform-origin: top right; transform-origin: top right; } .lcs_slide_out-l header a { right: 10px; } .lcs_slide_out-r { top: 100px; right: -"+this.config.width+"; } .lcs_slide_out-r.open { right: 0px; } .lcs_slide_out-r header { -webkit-transform: rotate(90deg); -ms-transform: rotate(90deg); transform: rotate(90deg);  -webkit-transform-origin: top left; -ms-transform-origin: top left; transform-origin: top left; } .lcs_slide_out-r header a { left: 10px; } .lcs_slide_out-b { right: 100px; bottom: -2px; height: 0; } .lcs_slide_out-b.open { height: "+this.config.height+"; } .lcs_slide_out-b header a { left: 10px; bottom: 0px; border-width: 1px 1px 0px 1px; } .lcs_slide_out-b.open header a { top: "+b_btn_offset+"; bottom: auto; } .lcs_slide_out iframe { width: 100%; height: "+iframeHeight+"px; background-color: "+this.config.color_backg+"; border: 0px; box-sizing:border-box; } @media (max-width: 768px) { .lcs_slide_out { width: 80%; } .lcs_load { width: 100% } .lcs_slide_out-l { left: -80%; } .lcs_slide_out-r { right: -80%; } .lcs_slide_out-b { left: 0; } }",head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style");style.type="text/css",style.styleSheet?style.styleSheet.cssText=css:style.appendChild(document.createTextNode(css)),head.appendChild(style)},start:function(){!0!==this.loaded&&(this.loaded=!0,this.insertWidgetCSS(),this.buildTab(),this.setTimer())}};tabWidget.config=options,tabWidget.cascadeServer=cascadeServer,tabWidget.referer=referer,tabWidget.refererTitle=refererTitle,"complete"===document.readyState||"interactive"===document.readyState?tabWidget.start():(document.addEventListener("DOMContentLoaded",tabWidget.start.bind(tabWidget),!1),window.addEventListener("load",tabWidget.start.bind(tabWidget),!1));})();